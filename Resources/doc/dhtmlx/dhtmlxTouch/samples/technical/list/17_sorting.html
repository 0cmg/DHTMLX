<!DOCTYPE HTML>
<html>
	<head>
              <meta  name = "viewport" content = "initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no">
	      <link rel="stylesheet" href="../../../codebase/touchui.css" type="text/css" media="screen" charset="utf-8">
	      <script src="../../../codebase/touchui.js" type="text/javascript" charset="utf-8"></script>
		
	<script src="../common/viewsources.js" type="text/javascript"></script>
	<link rel="STYLESHEET" type="text/css" href="../common/viewsources.css">
	
</head>
<body>
   <script type="text/javascript" charset="utf-8">
	dhx.ui({
		  	rows:[{
				view:"list", 
				id:"mylist", 
				url:"songs.xml", 
				datatype:"xml",
				template:"#name# (#author#)", 
				select:true
				
			},
			{	
				view:"toolbar", type:"MainBar",
				elements:[	{ view:"button", type:"round", label: 'By year', align:"left", click:"year_sort"},
						{ view:"button", type:"round", label: 'By time', align:"right", click:"time_sort"}]
			}]	 
        });
	function year_sort(){
		$$('mylist').sort({
				by:"#year#",
				dir:"asc",
				as: "int"
		});
 
	}
 
	function time_sort(){
		$$('mylist').sort({
				by:"#time#",
				dir:"asc",
				as: sortTime
		});
 
		function sortTime(a, b){
			a = a.split(":");
			b = b.split(":");
			if(a[0] > b[0]) return 1;
			else if(a[0] < b[0]) return -1;
			else{
				if(a[1] > b[1]) return 1;
				else if(a[1] < b[1]) return -1;
			return 0;
			}
		}
	}
   </script>
</body>
</html>

